---
export interface Props {
  title?: string;
  description?: string;
}

const { title = "Mr Valentino - La voix du cœur", description = "Chanteur franco-camerounais, passionné par la musique qui émeut et rassemble. Découvrez l'univers musical de Mr Valentino (Valentino Nguelieu)." } = Astro.props;
---

<!DOCTYPE html>
<html lang="fr" class="scroll-smooth" data-i18n-title="hero.title">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <meta name="theme-color" content="#ffffff" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>{title}</title>
    
    <!-- Enhanced Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Brand Colors CSS Variables -->
    <style>
      :root {
        --brand-primary: #6366f1;
        --brand-accent: #eab308;
        --brand-soul: #d946ef;
        --brand-gradient: linear-gradient(135deg, #6366f1 0%, #d946ef 50%, #eab308 100%);
      }
    </style>
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased transition-colors duration-300">
    <slot />
  </body>
</html>

<style is:global>
  html {
    scroll-behavior: smooth;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    /* Support for iOS safe areas */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
  
  body {
    line-height: 1.6;
    font-optical-sizing: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
    /* Improve touch scrolling on iOS */
    -webkit-overflow-scrolling: touch;
  }
  
  /* Enhanced scroll animations */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(40px);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #f1f5f9;
  }
  
  .dark ::-webkit-scrollbar-track {
    background: #1f2937;
  }
  
  ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #6366f1, #d946ef);
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #4f46e5, #c026d3);
  }
  
  /* Selection styling */
  ::selection {
    background: rgba(99, 102, 241, 0.2);
    color: #312e81;
  }
  
  .dark ::selection {
    background: rgba(99, 102, 241, 0.4);
    color: #e0e7ff;
  }
  
  /* Focus styles */
  *:focus-visible {
    outline: 2px solid #6366f1;
    outline-offset: 2px;
    border-radius: 4px;
  }
  
  .dark *:focus-visible {
    outline-color: #818cf8;
  }
  
  /* Smooth transitions for all interactive elements */
  button, a, input, textarea, select {
    transition: all 0.2s ease;
  }
  
  /* Enhanced button hover effects */
  .btn-primary {
    background: linear-gradient(135deg, #6366f1, #d946ef);
    position: relative;
    overflow: hidden;
  }
  
  .btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }
  
  .btn-primary:hover::before {
    left: 100%;
  }
  
  /* Dark mode specific styles */
  .dark {
    color-scheme: dark;
  }
  
  /* Improved contrast for dark mode */
  .dark .bg-white {
    background-color: #1f2937 !important;
  }
  
  .dark .bg-gray-50 {
    background-color: #111827 !important;
  }
  
  .dark .bg-gray-100 {
    background-color: #1f2937 !important;
  }
  
  .dark .text-gray-900 {
    color: #f9fafb !important;
  }
  
  .dark .text-gray-800 {
    color: #e5e7eb !important;
  }
  
  .dark .text-gray-700 {
    color: #d1d5db !important;
  }
  
  .dark .text-gray-600 {
    color: #9ca3af !important;
  }
  
  .dark .text-gray-500 {
    color: #6b7280 !important;
  }
  
  .dark .border-gray-200 {
    border-color: #374151 !important;
  }
  
  .dark .border-gray-300 {
    border-color: #4b5563 !important;
  }
  
  .dark .shadow-lg {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1) !important;
  }
  
  .dark .shadow-xl {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1) !important;
  }
  
  .dark .shadow-2xl {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4) !important;
  }
  
  /* Dark mode gradients */
  .dark .bg-gradient-to-br {
    background-image: linear-gradient(to bottom right, #111827, #1f2937, #111827) !important;
  }
  
  .dark .bg-gradient-to-r.from-gray-50 {
    background-image: linear-gradient(to right, #111827, #1f2937, #111827) !important;
  }
  
  /* Hero section dark mode */
  .dark #home {
    background-image: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%) !important;
  }
  
  /* Form elements dark mode */
  .dark input,
  .dark textarea,
  .dark select {
    background-color: #374151 !important;
    border-color: #4b5563 !important;
    color: #f9fafb !important;
  }
  
  .dark input:focus,
  .dark textarea:focus,
  .dark select:focus {
    border-color: #6366f1 !important;
    background-color: #4b5563 !important;
  }
  
  .dark input::placeholder,
  .dark textarea::placeholder {
    color: #9ca3af !important;
  }
  
  /* Card backgrounds in dark mode */
  .dark .bg-white {
    background-color: #1f2937 !important;
    border-color: #374151 !important;
  }
  
  /* Ensure proper contrast for all text elements */
  .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
    color: #f9fafb !important;
  }
  
  .dark p {
    color: #d1d5db !important;
  }
  
  /* Button adjustments for dark mode */
  .dark .bg-primary-600 {
    background-color: #6366f1 !important;
  }
  
  .dark .hover\:bg-primary-700:hover {
    background-color: #4f46e5 !important;
  }
  
  /* Special handling for gradient text */
  .dark .bg-gradient-to-r.from-gray-900.via-primary-700.to-gray-900 {
    background-image: linear-gradient(to right, #f9fafb, #818cf8, #f9fafb) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
  }
  
  /* Video modal dark mode */
  .dark #video-modal .bg-white {
    background-color: #1f2937 !important;
  }

  /* Responsive improvements */
  @media (max-width: 640px) {
    .container {
      padding-left: 1rem;
      padding-right: 1rem;
    }
    
    /* Improve touch targets on mobile */
    button, a {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better spacing on mobile */
    .space-y-6 > * + * {
      margin-top: 1rem;
    }
    
    .space-y-8 > * + * {
      margin-top: 1.5rem;
    }
    
    .space-y-10 > * + * {
      margin-top: 2rem;
    }
  }

  /* Landscape mobile adjustments */
  @media (max-height: 600px) and (orientation: landscape) {
    .min-h-screen {
      min-height: 100vh;
    }
    
    .py-24 {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }
    
    .py-20 {
      padding-top: 2.5rem;
      padding-bottom: 2.5rem;
    }
    
    .py-16 {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }
  }

  /* High DPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .shadow-brand,
    .shadow-brand-lg,
    .shadow-soul,
    .shadow-accent {
      filter: blur(0.5px);
    }
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    .animate-on-scroll {
      opacity: 1;
      transform: none;
    }
  }

  /* Print styles */
  @media print {
    .fixed,
    .sticky,
    button,
    .animate-on-scroll {
      position: static !important;
      opacity: 1 !important;
      transform: none !important;
    }
    
    .shadow-lg,
    .shadow-xl,
    .shadow-2xl {
      box-shadow: none !important;
    }
    
    .bg-gradient-to-r,
    .bg-gradient-to-br,
    .bg-gradient-brand {
      background: #f9fafb !important;
      color: #111827 !important;
    }
  }
</style>

<script>
  // Enhanced animation on scroll with stagger effect and performance optimization
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        // Use requestAnimationFrame for better performance
        requestAnimationFrame(() => {
          setTimeout(() => {
            entry.target.classList.add('visible');
          }, index * 100); // Stagger animation
        });
      }
    });
  }, observerOptions);

  document.addEventListener('DOMContentLoaded', () => {
    // Observe scroll animations
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });
    
    // Add loading animation with better performance
    document.body.style.opacity = '0';
    document.body.style.transform = 'translateY(20px)';
    
    // Use requestAnimationFrame for smoother animation
    requestAnimationFrame(() => {
      setTimeout(() => {
        document.body.style.transition = 'all 0.6s ease';
        document.body.style.opacity = '1';
        document.body.style.transform = 'translateY(0)';
      }, 100);
    });
    
    // Enhanced smooth scroll for anchor links with mobile optimization
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          const headerHeight = window.innerWidth >= 1024 ? 80 : 70;
          const targetPosition = target.offsetTop - headerHeight;
          
          // Use native smooth scroll with fallback
          if ('scrollBehavior' in document.documentElement.style) {
            window.scrollTo({
              top: targetPosition,
              behavior: 'smooth'
            });
          } else {
            // Fallback for older browsers
            window.scrollTo(0, targetPosition);
          }
        }
      });
    });

    // Optimize scroll performance
    let ticking = false;
    function updateScrollEffects() {
      // Your scroll effects here
      ticking = false;
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateScrollEffects);
        ticking = true;
      }
    }, { passive: true });

    // Handle orientation change
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        window.scrollTo(0, window.scrollY);
      }, 100);
    });

    // Improve touch performance on mobile
    if ('ontouchstart' in window) {
      document.body.classList.add('touch-device');
    }
  });

  // Performance monitoring
  if ('performance' in window && 'measure' in window.performance) {
    window.addEventListener('load', () => {
      setTimeout(() => {
        const perfData = performance.getEntriesByType('navigation')[0];
        if (perfData && perfData.loadEventEnd > 0) {
          console.log(`Page load time: ${perfData.loadEventEnd - perfData.fetchStart}ms`);
        }
      }, 0);
    });
  }
</script>